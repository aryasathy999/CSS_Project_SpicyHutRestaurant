<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 5px;
        }
        table {
            width: 50%;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h2>Invoice Generator</h2>
    <label for="product">Choose Product:</label>
    <select id="product">
        <option value="A4 Paper,20">A4 Paper (75gr/mÂ²) - $20</option>
        <option value="Pencil,15">Pencil (12ea/box) - $15</option>
        <option value="Ruler,5">Ruler - $5</option>
    </select>
    <label for="qty">Quantity:</label>
    <input type="number" id="qty" min="1" value="1">
    <button id="addBtn">Add to Invoice</button>

    <table id="invoiceTable">
        <thead>
            <tr>
                <th>Item</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="3"><strong>Subtotal</strong></td>
                <td id="subtotal">$0</td>
            </tr>
            <tr>
                <td colspan="3"><strong>Tax (0%)</strong></td>
                <td>$0</td>
            </tr>
            <tr>
                <td colspan="3"><strong>Total</strong></td>
                <td id="total">$0</td>
            </tr>
        </tfoot>
    </table>

    <script>
        let subtotal=0;
        document.getElementById("addBtn").addEventListener("click", function(){
            let productInfo=document.getElementById("product").value.split(",");
            let productName=productInfo[0];
            let unitPrice=parseInt(productInfo[1]);
            let qty=parseInt(document.getElementById("qty").value);

            let totalPrice=unitPrice*qty;
            subtotal=subtotal+totalPrice;

            let tableBody=document.querySelector("#invoiceTable tbody");
            let existingRow=Array.from(tableBody.rows).find(row => row.cells[0].innerText===productName);
            if(existingRow){
                let oldQty=parseInt(existingRow.cells[1].innerText);
                let newQty=oldQty+qty;
                existingRow.cells[1].innerText=newQty;
                existingRow.cells[3].innerText="$" + (unitPrice*newQty);
            }
            else{
                let row=tableBody.insertRow();
                row.insertCell(0).innerText=productName;
                row.insertCell(1).innerText=qty;
                row.insertCell(2).innerText="$" + unitPrice;
                row.insertCell(3).innerText="$" + totalPrice;
            }

            document.getElementById("subtotal").innerText="$" + subtotal;
            document.getElementById("total").innerText="$" + subtotal;
        });
    </script>
</body>
</html>