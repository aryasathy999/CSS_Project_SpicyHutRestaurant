<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Real-Time Form Validation</title>
  <style>
    body { font-family: Arial; max-width: 500px; margin: 50px auto; }
    input { display: block; width: 100%; margin-bottom: 10px; padding: 10px; font-size: 16px; }
    .error { color: red; font-size: 14px; display: none; margin-top: -8px; margin-bottom: 10px; }
    .valid { border: 2px solid green; }
    .invalid { border: 2px solid red; }
  </style>
</head>
<body>

  <h2>Signup Form</h2>

  <form id="signupForm" novalidate>
    <label>Name</label>
    <input type="text" id="name" />
    <div class="error" id="nameError">Name must be at least 3 letters (only alphabets).</div>

    <label>Email</label>
    <input type="email" id="email" />
    <div class="error" id="emailError">Enter a valid email address.</div>

    <label>Password</label>
    <input type="password" id="password" />
    <div class="error" id="passwordError">Password must be 8+ characters with a number and uppercase.</div>

    <label>Confirm Password</label>
    <input type="password" id="confirmPassword" />
    <div class="error" id="confirmPasswordError">Passwords do not match.</div>

    <button type="submit">Register</button>
  </form>

  <script>
    const nameInput = document.getElementById("name");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const confirmPasswordInput = document.getElementById("confirmPassword");

    const nameError = document.getElementById("nameError");
    const emailError = document.getElementById("emailError");
    const passwordError = document.getElementById("passwordError");
    const confirmPasswordError = document.getElementById("confirmPasswordError");

    // Regex patterns
    const nameRegex = /^[a-zA-Z]{3,}$/;
    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/;
    const passwordRegex = /^(?=.*[A-Z])(?=.*\d).{8,}$/;

    // Real-time validation
    nameInput.addEventListener("input", () => {
      validateField(nameInput, nameRegex.test(nameInput.value), nameError);
    });

    emailInput.addEventListener("input", () => {
      validateField(emailInput, emailRegex.test(emailInput.value), emailError);
    });

    passwordInput.addEventListener("input", () => {
      validateField(passwordInput, passwordRegex.test(passwordInput.value), passwordError);
      checkPasswordMatch();
    });

    confirmPasswordInput.addEventListener("input", checkPasswordMatch);

    function checkPasswordMatch() {
      const match = passwordInput.value === confirmPasswordInput.value && confirmPasswordInput.value !== '';
      validateField(confirmPasswordInput, match, confirmPasswordError);
    }

    function validateField(input, isValid, errorElement) {
      if (isValid) {
        input.classList.add("valid");
        input.classList.remove("invalid");
        errorElement.style.display = "none";
      } else {
        input.classList.remove("valid");
        input.classList.add("invalid");
        errorElement.style.display = "block";
      }
    }

    // Prevent form submit if invalid
    document.getElementById("signupForm").addEventListener("submit", function (e) {
      if (
        !nameRegex.test(nameInput.value) ||
        !emailRegex.test(emailInput.value) ||
        !passwordRegex.test(passwordInput.value) ||
        passwordInput.value !== confirmPasswordInput.value
      ) {
        e.preventDefault(); // Stop form submit
        alert("Please fix validation errors before submitting.");
      }
    });
  </script>
</body>
</html>
